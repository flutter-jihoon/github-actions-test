name: A, B ì„ íƒ ì‹¤í–‰ + C ì œì–´ + ìµœì¢… ê²°ê³¼ ë³´ê³ 

on:
  workflow_dispatch:
    inputs:
      which_jobs:
        description: ì–´ë–¤ Jobì„ ì‹¤í–‰í• ê¹Œìš”?
        required: true
        default: both
        type: choice
        options:
          - a
          - b
          - both
      c_success:
        description: Job Cë¥¼ ì„±ê³µìœ¼ë¡œ ì²˜ë¦¬í• ê¹Œìš”?
        required: true
        default: "true"
        type: choice
        options:
          - "true"
          - "false"

jobs:
  job_a:
    name: ðŸ”µ Job A
    if: ${{ inputs.which_jobs == 'a' || inputs.which_jobs == 'both' }}
    runs-on: ubuntu-latest
    outputs:
      result: success
    steps:
      - run: echo "Running Job A"

  job_b:
    name: ðŸŸ¢ Job B
    if: ${{ inputs.which_jobs == 'b' || inputs.which_jobs == 'both' }}
    runs-on: ubuntu-latest
    outputs:
      result: success
    steps:
      - run: echo "Running Job B"

  job_c:
    name: ðŸŸ¡ Job C (ì„±ê³µ/ì‹¤íŒ¨ ì œì–´)
    runs-on: ubuntu-latest
    outputs:
      result: ${{ steps.set_result.outputs.c_result }}
    steps:
      - id: set_result
        run: |
          echo "Job C ì‹¤í–‰ ì¤‘..."
          if [[ "${{ inputs.c_success }}" == "false" ]]; then
            echo "c_result=failure" >> $GITHUB_OUTPUT
            exit 1
          else
            echo "c_result=success" >> $GITHUB_OUTPUT
            exit 0
          fi

  final_report:
    name: ðŸ§¾ ìµœì¢… ë³´ê³ 
    needs: [job_a, job_b, job_c]
    if: ${{ always() && needs.job_c.result == 'success' }}
    runs-on: ubuntu-latest
    steps:
      - name: ê²°ê³¼ ì¶œë ¥
        run: |
          echo "âœ… Job A: ${{ needs.job_a.result || 'skipped' }}"
          echo "âœ… Job B: ${{ needs.job_b.result || 'skipped' }}"
          echo "âœ… Job C: ${{ needs.job_c.result }}"